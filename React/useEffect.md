# useEffect ‰ΩøÁî®ÊÄªÁªì

üßêüßêüßê Âàó‰∏Ä‰∫õÂú®‰ΩøÁî® useEffect ÁöÑÊó∂ÂÄôÔºåÁªèÂ∏∏‰ºöÈÅáËßÅÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºå‰ª•Âèä‰∏Ä‰∫õ‰ΩøÁî®ÊÄªÁªì„ÄÇ

## ‚òï useEffect ‰∏≠ÁöÑ props Âíå state

props ÊàñËÄÖ state ÁöÑÊõ¥Êñ∞‰ºöËß¶ÂèëÁªÑ‰ª∂ÁöÑÈáçÊñ∞Ê∏≤ÊüìÔºåÊØèÊ¨°Ê∏≤ÊüìÈÉΩ‰ºöÊúâÂÆÉËá™Â∑±ÁöÑ effctÔºå‰∏î effect ‰ºöÊçïËé∑‰∏ìÂ±û‰∫éÂÆÉËá™Â∑±ÁöÑÊï∞ÊçÆÊµÅ props Âíå stateÔºåËÄå‰∏îÊØè‰∏™ effect ‰∏≠ÁöÑÊï∞ÊçÆÈÉΩ‰∏çÂêå‰∫é‰ª•ÂæÄÔºåÔºàËøô‰πüÊòØ‰∏∫‰ªÄ‰πàÊúâÊó∂ÂÄô effect ‰∏≠ÁöÑ props Âíå state ‰ºöÊòØÊóßÂÄºÁöÑÂéüÂõ†ÔºåÁªÑ‰ª∂Êõ¥Êñ∞Ê≤°ËÉΩ‰Ωø effect ÈáçÊñ∞ÂàõÂª∫ÂéªÊçïËé∑Êñ∞ÁöÑ props Âíå stateÔºåÂØºËá¥Â≠òÂú®ÂÖ∂‰∏≠ÁöÑ props Âíå state ËøòÊòØ‰πãÂâçÁöÑÂÄºÔºåËøôÊòØÈÅóÊºè‰∫Ü‰∏Ä‰∫õ‰æùËµñÂØºËá¥ÁöÑÔºâ„ÄÇ

```js
function App() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    setTimeout(() => {
      console.log(count);
    }, 3000);
  }, [count]);

  return <button onClick={() => setCount(count + 1)}>+</button>;
}
```

count ÁöÑÂèòÂåñ‰ºöÂØºËá¥ÁªÑ‰ª∂ÁöÑÊõ¥Êñ∞ÔºåÈáçÊñ∞Ê∏≤ÊüìÂêéÁöÑÁªÑ‰ª∂‰ºöÊâßË°å effect„ÄÇ

```js
// ÂàùÊ¨°Ê∏≤ÊüìÊó∂,countÂèñÁöÑÊòØÈªòËÆ§ÂÄº0ÔºåÂú®Ê≠§Êó∂ÔºåeffectÊçïËé∑Âà∞Â±û‰∫é‰ªñÁöÑcount:0
// ...
useEffect(() => {
  setTimeout(() => {
    console.log(0); // Ê≠§ÂàªÁöÑcount‰∏∫0
  }, 3000);
}, [count]);
// ...

// Âú®ÁÇπÂáªÊåâÈíÆÂ¢ûÂä†countÂêé,countÂèòÂåñÂØºËá¥ÁªÑ‰ª∂ÈáçÊñ∞Ê∏≤ÊüìÔºåÁîüÊàêÊñ∞ÁöÑeffectÂπ∂Âú®Ê∏≤ÊüìÂÆåÊàêÂêéËøêË°åÔºåÂú®Ê≠§Êó∂ÔºåeffectÊçïËé∑Âà∞Â±û‰∫é‰ªñÁöÑcount:1

// ...
useEffect(() => {
  setTimeout(() => {
    console.log(1); // Ê≠§ÂàªÁöÑcount‰∏∫1
  }, 3000);
}, [count]);
// ...

// ...
```

> ÁªÑ‰ª∂ÂÜÖÁöÑÊØè‰∏Ä‰∏™ÂáΩÊï∞ÔºàÂåÖÊã¨‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞ÔºåeffectsÔºåÂÆöÊó∂Âô®ÊàñËÄÖ API Ë∞ÉÁî®Á≠âÁ≠âÔºâ‰ºöÊçïËé∑ÂÆö‰πâÂÆÉ‰ª¨ÁöÑÈÇ£Ê¨°Ê∏≤Êüì‰∏≠ÁöÑ props Âíå state„ÄÇ

---

## ‚òï useEffect ÁöÑ‰æùËµñ

ÈÄöËøá‰º†ÂÖ•‰æùËµñÔºåÊù•ÂëäËØâ reactÔºåÂè™ÊúâÂΩì‰º†ÂÖ•ÁöÑ‰æùËµñ‰∏≠Êüê‰∏™ state ÊîπÂèòÊó∂ÔºåÊâçË∞ÉÁî® effect„ÄÇ

Â¶ÇÊûúÂΩìÂâçÊ∏≤Êüì‰∏≠Ëøô‰∫õ‰æùËµñÈ°πÔºåÂíå‰∏ä‰∏ÄÊ¨°ËøêË°åËøô‰∏™ effect ÁöÑÂÄº‰∏ÄÊ†∑ÔºåÂõ†‰∏∫Ê≤°Êúâ‰ªÄ‰πàÈúÄË¶ÅÂêåÊ≠•Ôºåreact ‰æø‰ºöË∑≥ËøáËøôÊ¨° effect„ÄÇ
Â¶ÇÊûúËøô‰∫õ‰æùËµñ‰∏≠Êúâ‰∏Ä‰∏™ÂÄºÂú®‰∏§Ê¨°Ê∏≤Êüì‰∏≠‰∏ç‰∏ÄÊ†∑Ôºå‰æø‰∏çËÉΩË∑≥ËøáËøôÊ¨° effectÔºåÈúÄË¶ÅÂêåÊ≠•ÊâÄÊúâ„ÄÇ

ÂØπ‰∫é effect Êù•ËØ¥ÔºåÁî®Âà∞ÁöÑÊâÄÊúâÁªÑ‰ª∂ÂÜÖÁöÑÂÄºÔºåÈÉΩÂøÖÈ°ªÂåÖÂê´Âú®‰æùËµñ‰∏≠ÔºåÂåÖÊã¨ props Âíå state ‰ª•ÂèäÂáΩÊï∞Á≠â‰∏ÄÂàáÁªÑ‰ª∂ÈáåÁöÑ‰∏úË•øÔºåÂèØ‰ª•ÈÄöËøá‰º†ÂÖ•[]Á©∫Êï∞ÁªÑÔºå‰Ωø effect Âè™Âú®ÁªÑ‰ª∂ÊåÇËΩΩÊó∂ÊâßË°åÔºåÂõ†‰∏∫Ê≤°Êúâ‰æùËµñÈ°πÔºåÂêéÁª≠‰æø‰∏ç‰ºöÂÜçË¢´ react Ë∞ÉÁî®„ÄÇ

ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúÂú® effect ‰∏≠Êúâ‰ΩøÁî®Êüê‰∏™ effect Â§ñÁöÑÊüê‰∏™ÂáΩÊï∞ÔºåËÄåËøô‰∏™ÂáΩÊï∞Êúâ‰ΩøÁî®Âà∞Êï∞ÊçÆÊµÅ‰∏≠ÁöÑÊüê‰∏™ state ÊàñËÄÖ propsÔºåÊØîÂ¶ÇÔºö

```js
function App() {
  const [count, setCount] = useState(0);

  const add = () => `react.${count}`;

  useEffect(() => {
    const v = add();
    // do something need v
  }, []);
  return <button onClick={() => setCount(count + 1)}>+</button>;
}
```

Â∏åÊúõÂΩì count ÊîπÂèòÊó∂ÔºåË∞ÉÁî®‰∏ÄÊ¨° add ÂáΩÊï∞Ôºå‰ΩÜÊòØÂõ†‰∏∫ effect Ê≤°ÊúâÊää add ÂáΩÊï∞ÂΩíÂÖ•‰æùËµñÔºåeffect ‰æø‰∏ç‰ºöÊé•Êî∂Âà∞ count ÁöÑÊõ¥Êñ∞Ôºå‰ª•Ëá≥‰∫éÊ≤°ËÉΩÂèäÊó∂Ë∞ÉÁî® add„ÄÇ

Ëß£ÂÜ≥ÂäûÊ≥ïÔºö

1.Êää add ÂáΩÊï∞ÊîæÂÖ• effect ‰∏≠ÔºåÂπ∂ÊääÂáΩÊï∞Áî®ÁöÑÁªÑ‰ª∂ÂÜÖÊï∞ÊçÆÂΩíÂÖ•‰æùËµñÔºàËøôÈáåÊòØ countÔºâÔºö

```js
useEffect(() => {
  const add = () => `react.${count}`;
  const v = add();
  // do something need v
}, [count]);
```

2.Â¶ÇÊûúÊÉ≥Â§çÁî® add ÂáΩÊï∞ÁöÑÈÄªËæëÔºåÂèØ‰ª•Êää add ÂáΩÊï∞‰Ωú‰∏∫‰æùËµñÔºö

```js
const add = () => `react.${count}`;
useEffect(() => {
  const v = add();
  // do something need v
}, [add]);
```

3.ÊñπÊ≥ï 2 ‰∏≠ÁöÑ‰æùËµñÊñπÂºèËøá‰∫éÁÆÄÂçïÁ≤óÊö¥ÔºåÂõ†‰∏∫ÊØèÊ¨°Ê∏≤ÊüìÈÉΩ‰ºöÊõ¥Êñ∞ add ÂáΩÊï∞Ôºå‰æø‰ºöËß¶Âèë effect ÁöÑË∞ÉÁî®„ÄÇÂèØ‰ª•ÈÄöËøá‰ΩøÁî® useCallback Êù•ÂåÖË£πÂáΩÊï∞ÔºåÂπ∂ÂØπÂáΩÊï∞Âä†‰∏ä‰æùËµñÔºåÂè™ÊúâÂú®‰æùËµñÊõ¥Êñ∞Êó∂ÔºåÊâçÊõ¥Êñ∞Ëøô‰∏™ÂáΩÊï∞Ôºö

```js
const add = useCallback(() => `react.${count}`, [count]);
useEffect(() => {
  const v = add();
  // do something need v
}, [add]); // ËøôÊ†∑Âú®ÁªÑ‰ª∂Ê∏≤ÊüìÊó∂Ôºå‰æø‰∏ç‰ºöÊó∂ÂàªÈÉΩÊõ¥Êñ∞addÂáΩÊï∞Ôºå‰ªÖ‰ªÖÂú®countÂèòÂåñÊó∂Êâç‰ºöÊõ¥Êñ∞addÂáΩÊï∞
```

---

## ‚òï useEffect ÁöÑÊ∏ÖÈô§

ÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊ∂àÈô§ effect ÁöÑÂâØ‰ΩúÁî®ÔºåÊØîÂ¶ÇÂèñÊ∂àËÆ¢ÈòÖ„ÄÇ

Ê∏ÖÈô§Âíå effect ÁöÑÊâßË°å‰∏ÄÊ†∑ÔºåÂèëÁîüÂú®Ê∏≤Êüì‰πãÂêéÔºå‰πüÂ∞±ÊòØÁïåÈù¢‰∏äÂá∫Áé∞Êñ∞ÁöÑ UI ÂêéÔºåÊâç‰ºöÊâßË°åÊóß effect ÁöÑÊ∏ÖÈô§Êìç‰ΩúÔºåÁÑ∂ÂêéÊâçÊòØÊñ∞ effect ÁöÑÊâßË°åÊìç‰ΩúÔºåÂπ∂‰∏î‰∏çÁî®ÊãÖÂøÉÊóß effect ‰∏≠ props Âíå state ÂÄºÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫‰ªñÂú®ÂàõÂª∫Êó∂‰æøÂ∑≤ÁªèÊçïËé∑‰∫ÜÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÇ

```js
useEffect(() => {
  ChatAPI.subscribeToFriendStatus(props.id, handleStatusChange);
  return () => {
    ChatAPI.unsubscribeFromFriendStatus(props.id, handleStatusChange);
  };
});
```

ÊâßË°åÊµÅÁ®ãÂ§ßÊ¶ÇÊòØÔºö

- `{id: 10}`ÁöÑÊï∞ÊçÆÂèëÁîüÂèòÂåñ‰∏∫`{id: 20}`
- React Ê∏≤Êüì`{id: 20}`ÁöÑ UI
- ÊµèËßàÂô®ÁªòÂà∂`{id: 20}`ÁöÑÁïåÈù¢
- React Ê∏ÖÈô§`{id: 10}`ÁöÑ effect
- React ÊâßË°å`{id: 20}`ÁöÑ effect

‰∏çÁî®ÊãÖÂøÉ effect ‰ºöËÆ∞ÈîôÂÆÉÈáåÈù¢ÁöÑÂÄºÔºåÂè™Ë¶Å‰ªñÂàõÂª∫ÂêéÔºå‰æø‰∏ÄÂÆö‰ºöÊçïËé∑Âà∞ÂÆÉ‰ΩøÁî®Âà∞ÁöÑÁªÑ‰ª∂ÂÜÖÁöÑÊï∞ÊçÆÊµÅ„ÄÇ

---

## ‚òï useEffect ‰∏≠ÁöÑÊï∞ÊçÆËØ∑Ê±Ç

- ‰ªÖÂú®ÁªÑ‰ª∂ÂàùÊ¨°Ê∏≤ÊüìÂêéËøõË°åÊï∞ÊçÆËØ∑Ê±ÇÔºö
  - ÈÄöËøá‰º†ÂÖ•Á©∫Êï∞ÁªÑ[]‰Ωú‰∏∫ effect ÁöÑ‰æùËµñÔºåÈÅøÂÖçÂú®ÁªÑ‰ª∂Êõ¥Êñ∞Êó∂ÊâßË°åÔºå‰ªÖ‰ªÖÂè™Âú®ÁªÑ‰ª∂ÊåÇËΩΩÊó∂ÊâßË°å„ÄÇÂú®ËøôÈáåÔºå‰∏çÂ∫îËØ•Êää Promise ÊàñËÄÖ async ÂáΩÊï∞‰Ωú‰∏∫ effect ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂõ†‰∏∫‰ªñ‰ª¨‰ºöËøîÂõû‰∏Ä‰∏™ Promise ÁªìÊûÑÁöÑÂáΩÊï∞ÔºåÊ†πÊçÆË¶ÅÊ±ÇÔºåeffect Ë¶Å‰πà‰ªÄ‰πàÈÉΩ‰∏çËøîÂõûÔºåË¶Å‰πàÂ∞±ËøîÂõûÊ∏ÖÈô§ÂáΩÊï∞ÔºåÊâÄ‰ª•ËøôÈáåÂ∫îËØ•ÂØπËøôÁßçÊÉÖÂÜµËøõË°åÂåÖË£πÂ§ÑÁêÜÔºåÊØîÂ¶ÇÊää‰ªñ‰ª¨ÂåÖÂú®ÂÖ∂‰ªñÂáΩÊï∞ÈáåËøõË°åÊìç‰Ωú
- ÊâãÂä®ËØ∑Ê±ÇÔºö
  - ÈÄöËøá‰º†ÂÖ•ÈúÄË¶ÅÁöÑ‰æùËµñÔºåÊØîÂ¶ÇÈÄöËøáËæìÂÖ•Ê°ÜÊêúÁ¥¢ÂÅöËØ∑Ê±ÇÔºå‰æøÂèØ‰ª•ÊääËæìÂÖ•Ê°ÜÁöÑÂÄº‰Ωú‰∏∫‰æùËµñÔºåÂΩìÂÄºÊîπÂèòÊó∂‰æøËøõË°åÊêúÁ¥¢ËØ∑Ê±ÇÔºå‰πüËØ∑ËÆ∞ÂæóÂÅöÈò≤ÊäñÂ§ÑÁêÜ

Êï∞ÊçÆËØ∑Ê±Ç‰∏ªË¶ÅÊòØÈúÄË¶ÅÊâæÂáÜ‰æùËµñÔºå‰∏çËÆæÁΩÆ‰æùËµñÔºå‰ºöÂØºËá¥ÁªÑ‰ª∂ÊØèÊ¨°Ê∏≤ÊüìÈÉΩ‰ºöÂèëÈÄÅ‰∏ÄÊ¨°ËØ∑Ê±ÇÔºåËÄåÁõ¥Êé•Êää‰æùËµñËÆæÁΩÆ‰∏∫[]ÔºåËôΩÁÑ∂Âè™‰ºöÂú®ÁªÑ‰ª∂ÂàùÊ¨°Ê∏≤ÊüìÂêéÊâßË°å‰∏ÄÊ¨°ÔºåÂÖ∂Âêé‰æø‰∏çÂÜçË∞ÉÁî®Ôºå‰ΩÜÈúÄË¶ÅÂ∞èÂøÉËøôÁßçÊÉÖÂÜµÔºåÈúÄË¶ÅÂáÜÁ°ÆÊéíÊü•ÊòØÂê¶ÊúâÁî®Âà∞ÁªÑ‰ª∂ÂÜÖÊï∞ÊçÆÊàñËÄÖÂáΩÊï∞ÔºåÊúÄÂ•ΩÁöÑÊñπÂºèËøòÊòØÊâæÂáÜ effect ÈúÄË¶ÅÁöÑ‰æùËµñÔºåÈò≤Ê≠¢ÂèëÁîüÊú™Áü•ÁöÑÈîôËØØ„ÄÇ

---

## ‚òï useEffect ‰∏≠ÁöÑÂõûË∞ÉÂáΩÊï∞

ÊúÄÂ∏∏ËßÅÁöÑÊÉÖÂÜµÔºåÂ∞±ÊòØÂú® effect ‰∏≠ÁöÑÊüê‰∏™ÂõûË∞ÉÂáΩÊï∞ÈáåÔºå‰ΩøÁî®ÂΩìÂâçÁöÑ props ÊàñËÄÖ stateÔºåËÄå‰∏çÊòØ‰πãÂâçÊçïËé∑ÁöÑÊï∞ÊçÆÔºåËøôÁßçÊÉÖÂÜµÂ∞±Â•ΩÊØîÂú®ËøáÂéª‰ΩøÁî®Áé∞Âú®ÁöÑ‰∏úË•ø„ÄÇ

```js
const [count, setCount] = useState;

useEffect(() => {
  const data = request("www.website.com/api=api", {
    success() {
      // ËØ∑Ê±ÇÊàêÂäüÂêéÊâßË°å,Âπ∂ÊâìÂç∞ÊúÄÊñ∞ÁöÑcount
      console.log(count);
    },
  });
}, []);
```

ËøôÁßçÊÉÖÂÜµÂú® class ÁªÑ‰ª∂ÈáåÂ±°ËßÅ‰∏çÈ≤úÔºåÂú® componentDidMount ‰∏≠ÂÅöÂÆåÊï∞ÊçÆËØ∑Ê±ÇÂêéÔºåÈúÄË¶ÅÁî®Âà∞Êüê‰∫õÂÄºÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÈÄöËøá this ‰æøÂèØËΩªÊòìÊãøÂèñÂà∞„ÄÇÊàñËÄÖÊØîËæÉÂ∏∏Áî®ÁöÑÂ∞±ÊòØÂú® componentDidMount ËÆæÁΩÆ swiper ÁªÑ‰ª∂ÔºåÂõ†‰∏∫Ê∏≤ÊüìÁöÑÂéüÂõ†ÔºåDOM ‰ºöÂª∂ËøüÁîüÊàêÔºå‰ΩÜÈúÄË¶ÅÂú®ÁªÑ‰ª∂‰∏≠‰ΩøÁî®Âà∞Ëøô‰∏™ swiper DOM„ÄÇ

Âú® effect ‰∏≠ÔºåÈúÄË¶ÅËææÂà∞ËøôÊ†∑ÁöÑÊ†áÂáÜÔºåÂ∞±ÂæóÂØπÊï∞ÊçÆËøõË°å useRef Â§ÑÁêÜÔºö

```js
const [count, setCount] = useState;
const latestCount = useRef(count);

useEffect(() => {
  latestCount.current = count;
}, [count]);

useEffect(() => {
  const data = request("www.website.com/api=api", {
    success() {
      // ËØ∑Ê±ÇÊàêÂäüÂêéÊâßË°å,Âπ∂ÊâìÂç∞ÊúÄÊñ∞ÁöÑcount
      console.log(latestCount.current);
    },
  });
}, []);
```

swiper Á±ª‰ººÁöÑÂÜôÊ≥ïÔºàËé∑Âèñ DOMÔºåÂÆòÊñπÊñáÊ°£Êúâ‰ªãÁªçÂ¶Ç‰ΩïËÆøÈóÆ DOMÔºâÔºö

```js
const [someNode, setSomeNode] = useState;
const swiperNode = useRef(someNode);

useEffect(() => {
  const mySwiper = new Swiper(".swiper-container", {
    // ...
    on: {
      slideChangeTransitionStart: () => {
        console.log(swiperNode.current);
      },
    },
  });
}, []);

return (
  <>
    <div className="swiper-container">...</div>
    <div ref={swiperNode}>some node</div>
  </>
);
```

useRef ÂåÖË£πÁöÑÊï∞ÊçÆÔºåÂ∞±ÊúâÁÇπÂÉè class ÁªÑ‰ª∂ ‰∏≠ this.state ‰∏ÄÊ†∑ÔºåÊØèÊ¨°ÂØπÊï∞ÊçÆÁöÑ‰øÆÊîπÔºåÈÉΩÊòØ‰øÆÊîπÁöÑ state ‰∏≠ÁöÑ‰∏úË•øÔºå‰∏çÂÉèÊçïËé∑Âà∞ÁöÑ props Âíå stateÔºå‰Ω†Ê≤°Ê≥ï‰øùËØÅÂú®‰ªªÊÑè‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞‰∏≠ latestCount.current ÁöÑÂÄºÊòØ‰∏çÂèòÁöÑÔºåÂõ†‰∏∫ useRef ‰∏≠ÁöÑÂÄºÔºåÊÄªÊòØ‰øùÊåÅÊúÄÊñ∞ÁöÑÔºåËÄå‰∏îÊ†πÊçÆÂÆö‰πâÔºåÂèØ‰ª•ÈöèÊó∂‰øÆÊîπÂÆÉ„ÄÇ

ËøôÈáå‰πüÂÜçÊ¨°ËØ†Èáä‰∫Ü useState ‰∏≠‰∏Ä‰∏™Ë¶ÅÁÇπÔºåÂ∞±ÊòØ setCount ÁöÑ‰ΩúÁî®ÊòØÊõøÊç¢ÂéüÂÖàÁöÑÂÄºÔºå‰∏çÁÆ°‰Ω†ÊòØÂçïÁã¨ÁöÑ‰∏Ä‰∏™Êï∞ËøòÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåËÄå‰∏çÊòØÂÉè this.setState ‰∏ÄÊ†∑ÔºåÊòØÈù†ÂêàÂØπË±°Âπ∂Êù•‰∫ßÁîüÁöÑÊñ∞ÂÄºÔºåÊØîÂ¶Ç`{...oldState, ...newState}`ÔºåÂú®ËßÜËßâ‰∏äÔºåthis.state Â∞±ÂÉèÊòØ latestCount.current ÁöÑ‰∏Ä‰∏™ÈïúÂÉèÔºå‰ªñ‰ª¨‰ª£Ë°®‰∫ÜÂêåÊ†∑ÁöÑÊ¶ÇÂøµ„ÄÇref ÊòØ‰∏ÄÁßç‚ÄúÈÄâÊã©ÈÄÄÂá∫‚ÄùÊ∏≤Êüì‰∏ÄËá¥ÊÄßÁöÑÊñπÊ≥ïÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ã‰ºöÂçÅÂàÜÊñπ‰æøÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ∫îËØ•ÈÅøÂÖçÂú®Ê∏≤ÊüìÊúüÈó¥ËØªÂèñÊàñËÄÖËÆæÁΩÆ refsÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊòØÂèØÂèòÂæóÔºåÂ∫îËØ•‰øùÊåÅÊ∏≤ÊüìÁöÑÂèØÈ¢ÑÊµãÊÄß„ÄÇ

---

## ‚òï useEffect Ê®°‰ªøÁîüÂëΩÂë®Êúü

‰ΩøÁî® hook Â∫îËØ•ÂøòËÆ∞ class ÂíåÁîüÂëΩÂë®ÊúüÔºå‰ΩÜ‰∏çÊéíÈô§Êüê‰∫õÂú∫ÊôØÈúÄË¶ÅÁî®Âà∞Áõ∏Â∫îÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇÊåÇËΩΩÊó∂„ÄÅÊõ¥Êñ∞Êó∂ÂíåÂç∏ËΩΩÊó∂

ÂØπÊØî`componentDidMount`Âíå`componentWillUnmount`ÔºåËÆæÁΩÆÁ©∫‰æùËµñÔºå‰Ωø‰πã‰ªÖÂú®ÁªÑ‰ª∂ÂàùÊ¨°Ê∏≤ÊüìÂêéÊâßË°å‰∏ÄÊ¨°ÔºåÂêéÁª≠‰∏çÂÜçÊâßË°åÔºåÂπ∂‰∏î‰ªÖÂú®ÁªÑ‰ª∂Ë¢´ÈîÄÊØÅÊó∂ÊâßË°å‰∏ÄÊ¨°Ôºö

```js
useEffect(() => {
  // do something
}, []);
```

ÂØπÊØî`componentDidUpdate`Ôºå‰ΩøÁªÑ‰ª∂‰ªÖÂú®Êõ¥Êñ∞Êó∂ÊâßË°åÔºå‰∏çÂú®ÂàùÊ¨°Ê∏≤ÊüìÊó∂ÊâßË°åÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™Áä∂ÊÄÅÊù•Âà§Êñ≠ÊòØÂê¶ÊòØÂàùÊ¨°Âä†ËΩΩÔºö

```js
const firstRender = useRef();

useEffect(() => {
  if (!firstRender.current) {
    firstRender.current = true;
  } else {
    // update
  }
});
```

---

## ÂèÇËÄÉ

- [A Complete Guide to useEffect](https://overreacted.io/a-complete-guide-to-useeffect/)
- [How to fetch data with React Hooks?](https://www.robinwieruch.de/react-hooks-fetch-data)
- [React hooks: get the current state, back to the future](https://dev.to/scastiel/react-hooks-get-the-current-state-back-to-the-future-3op2)
- [How Are Function Components Different from Classes?](https://overreacted.io/how-are-function-components-different-from-classes/)
