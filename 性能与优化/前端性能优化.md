# 性能优化

## 关于阻塞 html 解析和页面渲染

1. css 下载与解析会阻塞页面渲染，但不会阻塞 html 解析
2. 无论外联还是内联，js 下载与执行都会阻塞 html 解析和页面渲染

解决办法：

1. 将 css 文件放在 head 中，提前下载 css 文件，尽早获取样式信息，减少阻塞渲染的时间
2. 媒体查询减少不必要的 css 的下载
   1. 例如`<link rel="stylesheet" media="screen and (min-width: 900px)" href="example.css">`，该样式表不会阻塞，因为媒体查询不匹配，仅在初次渲染时，页面宽度小于 900px 时，才会阻塞
3. 将 js 文件放在 body 底部，尽量减少 js 文件的体积，减少下载时间
4. 异步下载 js
   1. defer：异步进行下载，然后等待 HTML 解析完成后（DOM 完成构建）按照下载顺序进行执行
   2. async：异步进行下载，下载完成后会立即执行，执行时仍然会阻塞

## 减少重排重绘

1. 使用 class 操作样式，而不是频繁操作 style
2. 避免使用 table 布局
3. 批量 dom 操作，例如 createDocumentFragment，或者使用框架，例如 React
4. Debounce window resize 事件
5. 对 dom 属性的读写要分离
6. will-change: transform 做优化
